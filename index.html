<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Document</title>
</head>
<body>
<input type="text">
<input type="text">
<input type="button" value="开始倒计时">
</body>
<script>
//js代码在下面
	var input = document.getElementsByTagName('input');
var timer=null;
input[2].onclick=function(){
  //clearInterval(timer)
  timer=setInterval(test,1000);
}
function test(){
    var t1=input[0].value//='2017/01/05 13:31';
    if(new Date(t1)-new Date()<=0){
      clearInterval(timer);
      alert('计时完成');
    }else{
      var d=cd(t1, new Date(), 'd');
      var h=cd(t1, new Date(), 'h');
      var m=cd(t1, new Date(), 'm');
      var s=cd(t1, new Date(), 's');
      input[1].value=d+'天'+h+'时'+m+'分'+s+'秒';
    }
  }
	
	function cd(t1, t2, tg) {
    //相差的毫秒数
    var ms = Date.parse(t1) - Date.parse(t2);
    var minutes = 1000 * 60;
    var hours = minutes * 60;
    var days = hours * 24;
    var years = days * 365;
    //求出天数
    var d = Math.floor(ms / days);
    //求出除开天数，剩余的毫秒数
    ms %= days;
    var h = Math.floor(ms / hours);
    ms %= hours;
    var m = Math.floor(ms / minutes);
    ms %= minutes;
    var s = Math.floor(ms / 1000);
    //返回所需值并退出函数
    switch(tg){
      case 'd' : return d;
      case 'h' : return h;
      case 'm' : return m;
      case 's' : return s;
    }
}
</script>
</html>
